generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model dates_requests {
  id         Int          @id(map: "requests_dates_pk") @default(autoincrement())
  date       DateTime     @db.Date
  tender_id  Int
  tenders    tenders      @relation(fields: [tender_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "requests_dates_tenders_fk")
  file_names file_names[]
}

model file_names {
  tender_id          Int
  name               String            @db.VarChar
  rebidding_price_id Int?
  request_date_id    Int?
  id                 Int               @id(map: "file_names_pk") @default(autoincrement())
  rebidding_prices   rebidding_prices? @relation(fields: [rebidding_price_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "file_names_rebidding_prices_fk")
  dates_requests     dates_requests?   @relation(fields: [request_date_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "file_names_requests_dates_fk")
  tenders            tenders           @relation(fields: [tender_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "file_names_tenders_fk")
}

model rebidding_prices {
  tender_id  Int
  price      Decimal      @db.Money
  id         Int          @id(map: "prices_pk") @default(autoincrement())
  file_names file_names[]
  tenders    tenders      @relation(fields: [tender_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "prices_tenders_fk")
}

model tenders {
  id                Int                @id(map: "tenders_pk") @default(autoincrement())
  status            Int                @db.SmallInt
  company           String             @db.VarChar
  name              String             @db.VarChar
  lot_number        String             @unique(map: "tenders_unique_1") @db.VarChar
  register_number   String             @unique(map: "tenders_unique") @db.VarChar
  initial_max_price Decimal            @db.Money
  price             Decimal            @db.Money
  contact_person    String             @db.VarChar
  phone_number      String             @db.VarChar
  email             String             @db.VarChar
  date1_start       DateTime           @db.Timestamp(6)
  date1_finish      DateTime           @db.Timestamp(6)
  date2_finish      DateTime           @db.Timestamp(6)
  dates_requests    dates_requests[]
  file_names        file_names[]
  rebidding_prices  rebidding_prices[]
}
